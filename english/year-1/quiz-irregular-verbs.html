<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Irregular Verbs Flashcard Trainer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .card-inner { transition: transform 0.6s; transform-style: preserve-3d; }
        .flipped { transform: rotateY(180deg); }
        .correct-bg { background-color: #10b981; }
        .incorrect-bg { background-color: #ef4444; }
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(16, 185, 129, 0); }
            100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
        }
        .animate-pulse-green { animation: pulse-green 1s infinite; }
    </style>
</head>
<body class="bg-slate-900 min-h-screen p-4 flex items-center justify-center font-sans text-slate-100">
    <div class="max-w-xl w-full">
        <!-- Header & Stats -->
        <div class="flex justify-between items-end mb-8">
            <div>
                <h1 class="text-2xl font-black uppercase tracking-tighter text-blue-400">Verb Flashcards</h1>
                <p id="progress-text" class="text-slate-500 font-bold text-sm">CARD 1 / 10</p>
            </div>
            <div class="text-right">
                <p class="text-xs font-black text-slate-500 uppercase">Streak</p>
                <p id="streak" class="text-3xl font-black text-white">0</p>
            </div>
        </div>

        <!-- Flashcard Container -->
        <div id="card" class="relative w-full aspect-[4/3] perspective-1000 mb-8 cursor-pointer group">
            <div id="card-inner" class="card-inner relative w-full h-full shadow-2xl rounded-3xl bg-slate-800 border-2 border-slate-700 p-8 flex flex-col items-center justify-center text-center">
                
                <div id="verb-display" class="mb-4">
                    <p class="text-xs font-black text-blue-500 uppercase tracking-widest mb-2">Infinitive</p>
                    <h2 id="current-verb" class="text-5xl md:text-6xl font-black text-white">BE</h2>
                </div>

                <div class="w-full space-y-3 mt-6">
                    <input type="text" id="input-ps" class="w-full bg-slate-700/50 border-2 border-slate-600 rounded-2xl p-4 text-center text-xl font-bold outline-none focus:border-blue-500 transition-all" placeholder="Past Simple" autocomplete="off">
                    <input type="text" id="input-pp" class="w-full bg-slate-700/50 border-2 border-slate-600 rounded-2xl p-4 text-center text-xl font-bold outline-none focus:border-blue-500 transition-all" placeholder="Past Participle" autocomplete="off">
                </div>

                <button id="check-btn" onclick="checkAnswer()" class="mt-8 w-full py-4 bg-blue-600 text-white font-black rounded-2xl hover:bg-blue-500 shadow-xl transition-all uppercase tracking-widest">
                    Check Answer
                </button>
            </div>
        </div>

        <!-- Feedback & Controls -->
        <div id="feedback" class="hidden text-center p-6 rounded-2xl mb-8">
            <h3 id="feedback-title" class="text-2xl font-black mb-1">CORRECT!</h3>
            <p id="feedback-detail" class="text-slate-200 font-medium"></p>
            <button onclick="nextVerb()" class="mt-4 px-8 py-3 bg-white text-slate-900 font-black rounded-xl uppercase tracking-wider">Next Card <i class="fas fa-arrow-right ml-2"></i></button>
        </div>

        <div class="flex gap-4">
            <button onclick="location.reload()" class="flex-1 py-3 bg-slate-800 border border-slate-700 rounded-xl text-slate-400 font-bold hover:bg-slate-700 transition">
                <i class="fas fa-redo mr-2"></i> Reset
            </button>
            <button onclick="exportHistory()" class="flex-1 py-3 bg-slate-800 border border-slate-700 rounded-xl text-slate-400 font-bold hover:bg-slate-700 transition">
                <i class="fas fa-file-pdf mr-2"></i> Results
            </button>
        </div>
    </div>

    <script>
        const verbPool = [
            {inf: "be", ps: "was/were", pp: "been"},
            {inf: "become", ps: "became", pp: "become"},
            {inf: "begin", ps: "began", pp: "begun"},
            {inf: "break", ps: "broke", pp: "broken"},
            {inf: "bring", ps: "brought", pp: "brought"},
            {inf: "build", ps: "built", pp: "built"},
            {inf: "buy", ps: "bought", pp: "bought"},
            {inf: "catch", ps: "caught", pp: "caught"},
            {inf: "choose", ps: "chose", pp: "chosen"},
            {inf: "come", ps: "came", pp: "come"},
            {inf: "do", ps: "did", pp: "done"},
            {inf: "drink", ps: "drank", pp: "drunk"},
            {inf: "drive", ps: "drove", pp: "driven"},
            {inf: "eat", ps: "ate", pp: "eaten"},
            {inf: "fall", ps: "fell", pp: "fallen"},
            {inf: "feel", ps: "felt", pp: "felt"},
            {inf: "find", ps: "found", pp: "found"},
            {inf: "fly", ps: "flew", pp: "flown"},
            {inf: "forget", ps: "forgot", pp: "forgotten"},
            {inf: "get", ps: "got", pp: "got"},
            {inf: "give", ps: "gave", pp: "given"},
            {inf: "go", ps: "went", pp: "gone"},
            {inf: "grow", ps: "grew", pp: "grown"},
            {inf: "have", ps: "had", pp: "had"},
            {inf: "hear", ps: "heard", pp: "heard"},
            {inf: "keep", ps: "kept", pp: "kept"},
            {inf: "know", ps: "knew", pp: "known"},
            {inf: "leave", ps: "left", pp: "left"},
            {inf: "lose", ps: "lost", pp: "lost"},
            {inf: "make", ps: "made", pp: "made"},
            {inf: "meet", ps: "met", pp: "met"},
            {inf: "pay", ps: "paid", pp: "paid"},
            {inf: "read", ps: "read", pp: "read"},
            {inf: "ride", ps: "rode", pp: "ridden"},
            {inf: "run", ps: "ran", pp: "run"},
            {inf: "say", ps: "said", pp: "said"},
            {inf: "see", ps: "saw", pp: "seen"},
            {inf: "sell", ps: "sold", pp: "sold"},
            {inf: "send", ps: "sent", pp: "sent"},
            {inf: "sing", ps: "sang", pp: "sung"},
            {inf: "sit", ps: "sat", pp: "sat"},
            {inf: "sleep", ps: "slept", pp: "slept"},
            {inf: "speak", ps: "spoke", pp: "spoken"},
            {inf: "spend", ps: "spent", pp: "spent"},
            {inf: "swim", ps: "swam", pp: "swum"},
            {inf: "take", ps: "took", pp: "taken"},
            {inf: "teach", ps: "taught", pp: "taught"},
            {inf: "tell", ps: "told", pp: "told"},
            {inf: "think", ps: "thought", pp: "thought"},
            {inf: "understand", ps: "understood", pp: "understood"},
            {inf: "wear", ps: "wore", pp: "worn"},
            {inf: "win", ps: "won", pp: "won"},
            {inf: "write", ps: "wrote", pp: "written"}
        ];

        let sessionVerbs = [];
        let currentIndex = 0;
        let streakCount = 0;
        let history = [];

        function initSession() {
            sessionVerbs = [...verbPool].sort(() => 0.5 - Math.random()).slice(0, 10);
            showVerb();
        }

        function showVerb() {
            const v = sessionVerbs[currentIndex];
            document.getElementById('current-verb').innerText = v.inf.toUpperCase();
            document.getElementById('progress-text').innerText = `CARD ${currentIndex + 1} / ${sessionVerbs.length}`;
            document.getElementById('input-ps').value = '';
            document.getElementById('input-pp').value = '';
            document.getElementById('input-ps').focus();
            document.getElementById('feedback').classList.add('hidden');
            document.getElementById('card-inner').className = 'card-inner relative w-full h-full shadow-2xl rounded-3xl bg-slate-800 border-2 border-slate-700 p-8 flex flex-col items-center justify-center text-center';
        }

        function checkAnswer() {
            const v = sessionVerbs[currentIndex];
            const psVal = document.getElementById('input-ps').value.trim().toLowerCase();
            const ppVal = document.getElementById('input-pp').value.trim().toLowerCase();

            const psCorrect = v.ps.includes('/') 
                ? v.ps.split('/').some(opt => psVal === opt.trim()) || psVal === v.ps.replace('/', ' ') || psVal === v.ps
                : psVal === v.ps.toLowerCase();
            
            const ppCorrect = ppVal === v.pp.toLowerCase();

            const isCorrect = psCorrect && ppCorrect;
            
            const feedback = document.getElementById('feedback');
            const cardInner = document.getElementById('card-inner');
            
            history.push({inf: v.inf, ps: psVal, pp: ppVal, correct: isCorrect, expected: `${v.ps}, ${v.pp}`});

            if(isCorrect) {
                streakCount++;
                cardInner.classList.add('correct-bg', 'animate-pulse-green');
                document.getElementById('feedback-title').innerText = "EXCELLENT!";
                document.getElementById('feedback-detail').innerText = `Correct: ${v.ps} | ${v.pp}`;
                feedback.className = "text-center p-6 rounded-2xl mb-8 bg-green-600/20 text-green-400 border border-green-600/30";
            } else {
                streakCount = 0;
                cardInner.classList.add('incorrect-bg');
                document.getElementById('feedback-title').innerText = "NOT QUITE...";
                document.getElementById('feedback-detail').innerText = `Correction: ${v.ps} | ${v.pp}`;
                feedback.className = "text-center p-6 rounded-2xl mb-8 bg-red-600/20 text-red-400 border border-red-600/30";
            }

            document.getElementById('streak').innerText = streakCount;
            feedback.classList.remove('hidden');
            window.scrollTo({top: document.body.scrollHeight, behavior: 'smooth'});
        }

        function nextVerb() {
            currentIndex++;
            if(currentIndex >= sessionVerbs.length) {
                alert("Session Finished! Check your results.");
                exportHistory();
                location.reload();
            } else {
                showVerb();
            }
        }

        async function exportHistory() {
            if(history.length === 0) return alert("No history to export yet.");
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            doc.setFontSize(20);
            doc.text("Verb Flashcard Results", 20, 20);
            doc.setFontSize(12);
            doc.text(`Date: ${new Date().toLocaleString()}`, 20, 30);
            
            let y = 45;
            history.forEach((h, i) => {
                doc.setTextColor(0, 0, 0);
                doc.text(`${i+1}. ${h.inf.toUpperCase()}:`, 20, y);
                doc.setTextColor(h.correct ? 0 : 200, h.correct ? 150 : 0, 0);
                doc.text(`   Your Answer: ${h.ps}, ${h.pp} ${h.correct ? '✓' : '✗'}`, 20, y + 6);
                if(!h.correct) {
                    doc.setTextColor(100, 100, 100);
                    doc.text(`   Correct: ${h.expected}`, 20, y + 12);
                    y += 18;
                } else {
                    y += 12;
                }
                if(y > 270) { doc.addPage(); y = 20; }
            });
            doc.save("Verb_Trainer_Results.pdf");
        }

        document.addEventListener('keypress', (e) => {
            if(e.key === 'Enter') {
                if(!document.getElementById('feedback').classList.contains('hidden')) {
                    nextVerb();
                } else {
                    checkAnswer();
                }
            }
        });

        initSession();
    </script>
</body>
</html>