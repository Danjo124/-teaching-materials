<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Irregular Verbs Master - Level 1</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .correct { border-color: #10b981; background-color: #ecfdf5; color: #065f46; }
        .incorrect { border-color: #ef4444; background-color: #fef2f2; color: #991b1b; }
        .perfect-score { animation: celebrate 0.5s ease-out infinite alternate; }
        @keyframes celebrate {
            from { transform: scale(1); }
            to { transform: scale(1.05); }
        }
    </style>
</head>
<body class="bg-slate-100 min-h-screen p-4 font-sans text-slate-800">
    <div class="max-w-4xl mx-auto bg-white rounded-3xl shadow-2xl p-6 md:p-10 border border-slate-200">
        <header class="text-center mb-8">
            <div class="inline-block p-3 bg-yellow-100 rounded-full mb-4">
                <i class="fas fa-bolt text-yellow-600 text-2xl"></i>
            </div>
            <h1 class="text-3xl font-black text-slate-900 uppercase tracking-tighter">Irregular Verbs Master</h1>
            <p class="text-slate-500 font-medium">Level 1: The Basics</p>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
            <div class="p-4 bg-blue-50 rounded-2xl border border-blue-100">
                <label class="block text-xs font-bold text-blue-600 uppercase mb-1">Student Name</label>
                <input type="text" id="student-name" class="w-full bg-transparent p-1 text-lg font-bold outline-none border-b-2 border-blue-200 focus:border-blue-500" placeholder="Enter your name...">
            </div>
            <div id="stats" class="p-4 bg-slate-50 rounded-2xl border border-slate-200 flex items-center justify-around">
                <div class="text-center">
                    <p class="text-xs font-bold text-slate-400 uppercase">Score</p>
                    <p id="current-score" class="text-2xl font-black text-slate-800">0/10</p>
                </div>
                <div class="text-center">
                    <p class="text-xs font-bold text-slate-400 uppercase">Status</p>
                    <p id="status-text" class="text-sm font-bold text-blue-500">In Progress</p>
                </div>
            </div>
        </div>

        <div class="overflow-x-auto">
            <table class="w-full text-left border-separate border-spacing-y-2">
                <thead>
                    <tr class="text-slate-400 text-xs font-black uppercase tracking-widest">
                        <th class="px-4 py-2">Infinitive</th>
                        <th class="px-4 py-2">Past Simple</th>
                        <th class="px-4 py-2">Past Participle</th>
                    </tr>
                </thead>
                <tbody id="verb-table">
                    <!-- Rows generated by JS -->
                </tbody>
            </table>
        </div>

        <div class="mt-10 space-y-4">
            <button onclick="checkAll()" class="w-full py-5 bg-blue-600 text-white font-black rounded-2xl hover:bg-blue-700 transition shadow-lg text-xl uppercase tracking-widest flex items-center justify-center gap-3">
                <i class="fas fa-graduation-cap"></i> Finish & Grade
            </button>
            
            <div id="export-area" class="hidden grid grid-cols-2 gap-3">
                <button onclick="exportResult()" class="py-4 bg-slate-900 text-white font-bold rounded-2xl hover:bg-black transition flex items-center justify-center gap-2">
                    <i class="fas fa-file-pdf"></i> Get Certificate
                </button>
                <button onclick="location.reload()" class="py-4 bg-slate-200 text-slate-700 font-bold rounded-2xl hover:bg-slate-300 transition">
                    <i class="fas fa-redo"></i> Try Again
                </button>
            </div>
        </div>
    </div>

    <script>
        const verbs = [
            {inf: "be", ps: "was/were", pp: "been"},
            {inf: "go", ps: "went", pp: "gone"},
            {inf: "eat", ps: "ate", pp: "eaten"},
            {inf: "drink", ps: "drank", pp: "drunk"},
            {inf: "see", ps: "saw", pp: "seen"},
            {inf: "write", ps: "wrote", pp: "written"},
            {inf: "buy", ps: "bought", pp: "bought"},
            {inf: "take", ps: "took", pp: "taken"},
            {inf: "make", ps: "made", pp: "made"},
            {inf: "read", ps: "read", pp: "read"}
        ];

        const table = document.getElementById('verb-table');
        verbs.forEach((v, i) => {
            table.innerHTML += `
                <tr class="bg-slate-50 rounded-xl overflow-hidden shadow-sm">
                    <td class="px-4 py-4 font-black text-slate-700 italic underline decoration-blue-300 decoration-2">${v.inf}</td>
                    <td class="px-2 py-2">
                        <input type="text" id="ps${i}" class="verb-input w-full p-3 bg-white border-2 border-slate-200 rounded-xl outline-none focus:border-blue-500 font-bold transition-all" placeholder="...">
                    </td>
                    <td class="px-2 py-2">
                        <input type="text" id="pp${i}" class="verb-input w-full p-3 bg-white border-2 border-slate-200 rounded-xl outline-none focus:border-blue-500 font-bold transition-all" placeholder="...">
                    </td>
                </tr>
            `;
        });

        function checkAll() {
            let correctCount = 0;
            verbs.forEach((v, i) => {
                const psInput = document.getElementById(`ps${i}`);
                const ppInput = document.getElementById(`pp${i}`);
                
                // Allow was/were or were/was
                const psCorrect = v.ps.includes('/') 
                    ? v.ps.split('/').some(opt => psInput.value.trim().toLowerCase() === opt) || psInput.value.trim().toLowerCase() === v.ps.replace('/', ' ') || psInput.value.trim().toLowerCase() === v.ps
                    : psInput.value.trim().toLowerCase() === v.ps.toLowerCase();

                const ppCorrect = ppInput.value.trim().toLowerCase() === v.pp.toLowerCase();

                if(psCorrect) { psInput.className = 'verb-input w-full p-3 border-2 rounded-xl outline-none font-bold correct'; }
                else { psInput.className = 'verb-input w-full p-3 border-2 rounded-xl outline-none font-bold incorrect'; }

                if(ppCorrect) { ppInput.className = 'verb-input w-full p-3 border-2 rounded-xl outline-none font-bold correct'; }
                else { ppInput.className = 'verb-input w-full p-3 border-2 rounded-xl outline-none font-bold incorrect'; }

                if(psCorrect && ppCorrect) correctCount++;
            });

            document.getElementById('current-score').innerText = `${correctCount}/${verbs.length}`;
            const status = document.getElementById('status-text');
            const exportArea = document.getElementById('export-area');
            
            if(correctCount === verbs.length) {
                status.innerText = "Master Level!";
                status.className = "text-sm font-black text-green-500 perfect-score";
            } else {
                status.innerText = "Keep Practicing!";
                status.className = "text-sm font-bold text-orange-500";
            }

            exportArea.classList.remove('hidden');
        }

        async function exportResult() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const name = document.getElementById('student-name').value || 'Student';
            const score = document.getElementById('current-score').innerText;

            doc.setFillColor(30, 41, 59);
            doc.rect(0, 0, 210, 40, 'F');
            
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(24);
            doc.text("VERB MASTER CERTIFICATE", 105, 25, {align: 'center'});

            doc.setTextColor(0, 0, 0);
            doc.setFontSize(16);
            doc.text(`Awarded to: ${name}`, 20, 60);
            doc.text(`Score: ${score}`, 20, 70);
            doc.text(`Date: ${new Date().toLocaleDateString()}`, 20, 80);

            doc.setLineWidth(0.5);
            doc.line(20, 85, 190, 85);

            let y = 100;
            doc.setFontSize(10);
            doc.text("Verb", 20, y);
            doc.text("Past Simple", 70, y);
            doc.text("Past Participle", 120, y);
            doc.line(20, y+2, 190, y+2);
            y += 10;

            verbs.forEach((v, i) => {
                const ps = document.getElementById(`ps${i}`).value;
                const pp = document.getElementById(`pp${i}`).value;
                doc.text(v.inf, 20, y);
                doc.text(ps || "-", 70, y);
                doc.text(pp || "-", 120, y);
                y += 8;
            });

            doc.save(`VerbMaster_${name.replace(/ /g, '_')}.pdf`);
        }
    </script>
</body>
</html>